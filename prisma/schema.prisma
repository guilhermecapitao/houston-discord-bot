// Este é o seu arquivo de schema do Prisma,
// aprenda mais sobre ele na documentação: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider  = "postgresql"
  url       = env("DATABASE_URL")
  directUrl = env("DIRECT_URL") // Adicionada para tarefas de migração
}

// Modelo para as mensagens agendadas
model ScheduledMessage {
  id             BigInt        @id @default(autoincrement())
  createdAt      DateTime      @default(now()) @map("created_at")
  channelId      String        @map("channel_id")
  messageContent String        @map("message_content")
  scheduleTime   DateTime      @map("schedule_time")
  status         MessageStatus @default(PENDING)

  @@map("scheduled_messages")
}

// Enum para o status das mensagens, garantindo consistência
enum MessageStatus {
  PENDING
  SENT
  ERROR_SENDING
  ERROR_CHANNEL_NOT_FOUND
}
